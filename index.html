<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <title>Apna Course : Learning</title>
  <meta name="description" content="Apna Course Learning App" />
  <link rel="apple-touch-icon" href="fav.jpg" />
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="fav.jpg" type="image/jpeg" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.sw.js"></script>
</head>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet" />
<script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
<script>
  window.OneSignalDeferred = window.OneSignalDeferred || [];
  OneSignalDeferred.push(async function (OneSignal) {
    await OneSignal.init({
      appId: "3fa7f09b-cf8a-43dd-9ec7-8defe4142b00",
      notifyButton: {
        enable: true
      }
    });
  });
</script>
<style>
  body {
    font-family: "Inter", sans-serif;
  }

  .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }

  .hide-scrollbar {
    -ms-overflow-style: none;
    /* IE and Edge */
    scrollbar-width: none;
    /* Firefox */
  }
</style>
</head>

<body class="bg-[#f5fdf7] min-h-screen flex flex-col text-sm  max-w-lg mx-auto">
  <header class="px-3 py-4 flex items-center justify-between">
    <div>
      <a href="">
        <h1 class="text-xl font-extrabold text-[#1a1a1a] leading-none">
          <span>Apna</span>
          <span class="text-green-700 font-extrabold font-bold">Course</span>
        </h1>
      </a>
    </div>
    <div class="flex gap-4">
      <button id="installBtn" style="display:none; text-color: bg-green-700"> <span class="fa-stack fa-3x1 mt-0">
          <i class="fas fa-mobile-alt fa-stack-2x text-green-700"></i>

          <i class="fas fa-arrow-down fa-stack-1x text-green-700"></i>
        </span></button>
      <a href="Owner.html">
        <img alt="Profile picture of a young man with short hair wearing a blue shirt"
          class="w-8 h-8 rounded-full border-2 border-[#0f6f61]" height="32" src="User.jpg" width="32" />
      </a>
    </div>
  </header>

  <section style="display: none ;" id="appDownload" style="z-index: 99999999999999999%;"
    class="fixed w-full z-50 top-0 left-0 bg-black/60 flex items-center justify-center min-h-screen transition-opacity">
    <div
      class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 bg-white rounded-xl p-6 flex flex-col items-center shadow-l">
      <img alt="App Logo" src="fav.jpg" width="90" height="90" class="mb-3 rounded-full" />
      <p id="installStatus" class="text-green-700 font-semibold text-lg mb-3"
        style="font-family: 'Montserrat', sans-serif;">
        Processing...

      <div class="w-full max-w-md bg-white rounded-lg shadow-lg p-6">
        <h1 class="text-2xl font-semibold text-gray-800 mb-6 flex items-center justify-center space-x-3">
          <i class="fas fa-download text-blue-600"></i>
        
        </h1>

        <div class="w-full bg-gray-200 rounded-full h-6 overflow-hidden relative">
          <div id="progress-bar" class="bg-blue-600 h-6 rounded-full"
            style="width: 0%; animation: fillWidth 4s linear forwards;"></div>
          <span id="progress-text"
            class="absolute inset-0 flex items-center justify-center text-white font-semibold text-sm select-none">0%</span>
        </div>

        <p id="status-text" class="mt-4 text-center text-gray-700 font-medium">
          Downloading your App...
        </p>
      </div>
      <style>
        @keyframes fillWidth {
          from {
            width: 0%;
          }

          to {
            width: 100%;
          }
        }
      </style>
      <script>
        const progressBar = document.getElementById("progress-bar");
        const progressText = document.getElementById("progress-text");
        const statusTexts = document.getElementById("status-text");

        let startTime = null;
        const duration = 5000; // 4 seconds

        function animateProgress(timestamp) {
          if (!startTime) startTime = timestamp;
          const elapsed = timestamp - startTime;
          const progress = Math.min(elapsed / duration, 1);
          const percent = Math.floor(progress * 100);

          progressBar.style.width = percent + "%";
          progressText.textContent = percent + "%";

          if (progress < 1) {
            requestAnimationFrame(animateProgress);
          } else {
            statusTexts.textContent = "Download Complete!";
          }
        }

        requestAnimationFrame(animateProgress);
      </script>
      </p>
      <audio id="audioPlayer" class="hidden" src="bell.wav"></audio>

      <script>
        const statusText = document.getElementById("installStatus");
        setTimeout(() => {
          statusText.innerText = "Installed";

          const audio = document.getElementById("audioPlayer");
          audio.play().catch(err => {
            statusText.innerText = "Completed";
            console.error(err);
          });

        }, 5000);
        setTimeout(() => {
          window.location.reload();
        }, 6000);
      </script>
    </div>
  </section>


  <a href="Inputsuggestion.html">
    <form id="search-form" class="w-full  px-3" role="search" aria-label="Search jobs or courses" novalidate>
      <label class="sr-only" for="search">Search courses by name</label>
      <div class="flex items-center border-2 border-[#1a1a1a] rounded-xl py-2 px-3 relative bg-[#f5fdf7]">
        <i class="fas fa-search text-[#1a1a1a] text-lg"></i>
        <input class="flex-grow ml-3 text-base placeholder:text-[#1a1a1a] focus:outline-none bg-[#f5fdf7]" id="search"
          name="search" placeholder="Search Courses By Name" type="search" autocomplete="on" aria-autocomplete="list"
          aria-controls="suggestions-list" aria-haspopup="listbox" aria-expanded="false" role="combobox"
          aria-activedescendant="" oninput="filterSuggestions()" onkeydown="handleKeyDown(event)" />
        <button aria-label="Voice search" class="text-[#0f6f61] text-xl ml-3" type="button">
          <i class="fas fa-microphone"></i>
        </button>
        <ul id="suggestions-list" role="listbox"
          class="absolute top-full left-0 right-0 bg-white border border-gray-300 rounded-b-xl max-h-48 overflow-auto z-50 hidden shadow-lg">
        </ul>
      </div>
    </form>
  </a>

  <script>
    let deferredPrompt;
    const installBtn = document.getElementById('installBtn');


    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      installBtn.style.display = 'block';

      installBtn.addEventListener('click', () => {
        installBtn.style.display = 'none';

        deferredPrompt.prompt();
        deferredPrompt.userChoice.then((choiceResult) => {
          if (choiceResult.outcome === 'accepted') {
            console.log('User accepted the install prompt');
            document.getElementById('appDownload').style.display = 'block';
            const statusText = document.getElementById("installStatus");
            setTimeout(() => {
              statusText.innerText = "Installed";
            }, 4000);
          } else {
            console.log('User dismissed the install prompt');
            setTimeout(() => {
              statusText.innerText = "Not Install";
            }, 4000);
          }
          deferredPrompt = null;
        });
      });
    });

    // Register service worker
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(reg => console.log('Service Worker registered:', reg))
          .catch(err => console.error('Service Worker registration failed:', err));
      });
    }

    self.addEventListener("install", function (event) {
      console.log("Service Worker installing.");
    });

    self.addEventListener("fetch", function (event) {
      // You can handle caching if you want here
    });

  </script>
  <section class="px-3">
    <div class="flex items-center space-x-2  ">
      <img alt="Profile picture of a man with black hair and beard wearing a white shirt with yellow background"
        class="w-8 h-8 rounded-full" height="32" src="User.jpg" width="32" />
      <div>
        <p class="text-[#1a1a1a] font-semibold leading-tight">
          Complete your pending tasks
        </p>
        <p class="text-[#8a8a9f] leading-tight">
          Get chances to connect with teacher's
        </p>
      </div>
    </div>
    <div class="mt-3 flex space-x-3 overflow-x-auto pb-1 hide-scrollbar">
      <div class="flex-shrink-0 bg-[#ffe9d9] rounded-xl p-2 flex items-center space-x-3 min-w-[220px]">
        <img alt="Icon of a briefcase in orange color with a plus sign on bottom right" class="w-14 h-14 rounded-lg"
          height="56" src="https://storage.googleapis.com/a1aa/image/84a2e4bb-5dbc-4dc9-25a1-d2e61e20fb97.jpg"
          width="56" />
        <div>
          <p class="text-[#1a1a1a] mb-0.5 leading-tight">
            Add a new course ? Add it !
          </p>
          <button class="bg-[#0f6f61] text-white font-semibold rounded-md px-3 py-1 mt-1 text-sm" type="button">
            Add Course
          </button>
        </div>
      </div>
      <div class="flex-shrink-0 bg-[#fff1cc] rounded-xl p-3 flex items-center space-x-3 min-w-[220px]">
        <img alt="Icon of a briefcase in yellow color with a plus sign on bottom right" class="w-14 h-14 rounded-lg"
          height="56" src="https://storage.googleapis.com/a1aa/image/51b67bfd-7fc8-401b-9ffa-33f88f06d16a.jpg"
          width="56" />
        <div>
          <p class="text-[#1a1a1a] mb-0.5 leading-tight">Join with us as a teacher</p>
          <button class="bg-[#0f6f61] text-white font-semibold rounded-md px-3 py-1 mt-1 text-sm" type="button">
            Add details
          </button>
        </div>
      </div>
    </div>
  </section>
  <div id="courselist"></div>

  <script>
    // Load CSS
    const link = document.createElement("link");
    link.rel = "stylesheet";
    link.href = "css/style.css";
    document.head.appendChild(link);

    // Load HTML and then JS
    window.addEventListener("DOMContentLoaded", () => {
      fetch("Courselist.html")
        .then(res => res.text())
        .then(html => {
          document.getElementById("courselist").innerHTML = html;

          // Now load the script after HTML is inserted
          const script = document.createElement("script");
          script.src = "script.js";
          script.defer = true; // Optional, loads after parsing
          document.body.appendChild(script);
        });
    });
  </script>

  <nav aria-label="Bottom navigation"
    class="fixed bottom-0 left-0 right-0 border-t border-[#d9d9d9] bg-white flex justify-around items-center py-2 text-xs font-semibold text-[#8a8a9f] z-50"
    role="navigation">

    <!-- Home -->
    <a href="index.html" class="flex flex-col items-center  ">
      <img src="https://img.icons8.com/ios-filled/50/000000/home.png" alt="Home Icon" class="w-6 h-6" />
      Home
      <div class="w-12 border-b-2 border-[#0f6f61] mt-1"></div>
    </a>

    <!-- Course -->
    <a href="Courselist.html" class="flex flex-col items-center relative text-[#8a8a9f]">
      <img src="https://img.icons8.com/ios-filled/50/000000/open-book--v1.png" alt="Course Icon" class="w-5 h-5 mb-1" />
      Course
      <span
        class="absolute -top-1 hidden right-3 bg-[#e11d48] text-white rounded-full text-[8px] font-bold w-4 h-4 flex items-center justify-center leading-none">1</span>
    </a>

    <!-- Job -->
    <a href="Job.html" class="flex flex-col items-center text-[#8a8a9f]">
      <img src="https://img.icons8.com/ios-filled/50/000000/job.png" alt="Job Icon" class="w-5 h-5 mb-1" />
      Job
    </a>

    <!-- My -->
    <a href="Mycourse.html" class="flex flex-col items-center text-[#8a8a9f]">
      <img src="https://img.icons8.com/ios-filled/50/000000/controller.png" alt="Game Icon" class="w-5 h-5 mb-1" />
      Quiz
    </a>

  </nav>
  <script>
    const courses = [
      "English Speaking",
      "Telly",
      "DCA",
      "PGDCA",
      "11th",
      "12th"
    ];

    const input = document.getElementById("search");
    const suggestionsList = document.getElementById("suggestions-list");

    function filterSuggestions() {
      const value = input.value.toLowerCase();
      suggestionsList.innerHTML = "";
      if (!value) {
        suggestionsList.classList.add("hidden");
        input.setAttribute("aria-expanded", "false");
        return;
      }
      const filtered = courses.filter(course => course.toLowerCase().startsWith(value));
      if (filtered.length === 0) {
        suggestionsList.classList.add("hidden");
        input.setAttribute("aria-expanded", "false");
        return;
      }
      filtered.forEach((course, index) => {
        const li = document.createElement("li");
        li.setAttribute("role", "option");
        li.id = `suggestion-${index}`;
        li.className = "px-3 py-1 cursor-pointer hover:bg-[#e6f4f1]";
        li.textContent = course;
        li.addEventListener("click", () => {
          input.value = course;
          suggestionsList.classList.add("hidden");
          input.setAttribute("aria-expanded", "false");
          input.focus();
        });
        suggestionsList.appendChild(li);
      });
      suggestionsList.classList.remove("hidden");
      input.setAttribute("aria-expanded", "true");
    }

    function handleKeyDown(e) {
      const active = document.activeElement;
      const options = Array.from(suggestionsList.querySelectorAll("li"));
      if (suggestionsList.classList.contains("hidden")) return;

      let currentIndex = options.findIndex(option => option === active);

      if (e.key === "ArrowDown") {
        e.preventDefault();
        if (currentIndex < options.length - 1) {
          options[currentIndex + 1].focus();
          input.setAttribute("aria-activedescendant", options[currentIndex + 1].id);
        } else if (currentIndex === -1 && options.length > 0) {
          options[0].focus();
          input.setAttribute("aria-activedescendant", options[0].id);
        }
      } else if (e.key === "ArrowUp") {
        e.preventDefault();
        if (currentIndex > 0) {
          options[currentIndex - 1].focus();
          input.setAttribute("aria-activedescendant", options[currentIndex - 1].id);
        }
      } else if (e.key === "Enter") {
        if (currentIndex >= 0) {
          e.preventDefault();
          input.value = options[currentIndex].textContent;
          suggestionsList.classList.add("hidden");
          input.setAttribute("aria-expanded", "false");
          input.setAttribute("aria-activedescendant", "");
          input.focus();
        }
      } else if (e.key === "Escape") {
        suggestionsList.classList.add("hidden");
        input.setAttribute("aria-expanded", "false");
        input.setAttribute("aria-activedescendant", "");
      }
    }

    document.addEventListener("click", (e) => {
      if (!e.target.closest("#search") && !e.target.closest("#suggestions-list")) {
        suggestionsList.classList.add("hidden");
        input.setAttribute("aria-expanded", "false");
        input.setAttribute("aria-activedescendant", "");
      }
    });
  </script>

</body>

</html>